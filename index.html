<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Clocker by brooklyncentral</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Clocker</h1>
        <p class="header">Brooklyn Managed Docker Containers</p>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/brooklyncentral/clocker/zipball/master">Source ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/brooklyncentral/clocker/tarball/master">Source TAR</a></li>
          <li class="download"><a class="buttons" href="https://github.com/brooklyncentral/clocker/releases/download/20141104/brooklyn-clocker-examples-0.7.0-SNAPSHOT-dist.tar.gz">Distribution TGZ</a></li>
          <li><a class="buttons github" href="https://github.com/brooklyncentral/clocker">View On GitHub</a></li>
        </ul>
        <p class="header">This project is maintained by <a class="header name" href="https://github.com/grkvlt">@grkvlt</a> and <a class="header name" href="https://github.com/andreaturli">@andreaturli</a></p>
      </header>
      <section>
        <h1><a name="clocker" class="anchor" href="#clocker"><span class="octicon octicon-link"></span></a>Clocker</h1>

<p>Clocker creates and manages a <a href="http://docker.io/">Docker</a> cloud infrastructure. Clocker supports
single-click deployment and runtime management of multi-node applications that can run on
containers distributed across docker hosts. Application blueprints written for 
<a href="https://brooklyn.incubator.apache.org/">Brooklyn</a> can thus be deployed to a Docker cloud 
infrastructure.</p>

<p>This repository contains the required Brooklyn entities and locations, and some example application blueprints.</p>

<h2><a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h2>

<p>To get started, you just have to download Clocker, deploy the DockerCloud blueprint to the 
cloud or machines of your choice, and then use Clocker to deploy your applications. This will 
automatically create the required Docker containers.</p>

<iframe width="640" height="480" src="//www.youtube.com/embed/i2Nhg2J8puM" frameborder="0" allowfullscreen></iframe>

<p>You can create a Docker based cloud infrastructure on your favourite cloud provider or on a 
private cloud using any of the jclouds supported APIs. Alternatively you can target one or 
more existing machines for running Docker.</p>

<p>If you are keen to peek under the covers, you can find the Clocker Infrastructure blueprint at 
<a href="https://raw.githubusercontent.com/brooklyncentral/clocker/master/examples/src/main/assembly/files/blueprints/docker-cloud.yaml">docker-cloud.yaml</a>.
This shows the components being created, including examples of placement strategies and container naming schemes.</p> 

<h3><a name="using-the-latest-clocker-release" class="anchor" href="#using-the-latest-clocker-release"><span class="octicon octicon-link"></span></a>Using the latest Clocker release</h3>

<p>You can build a <em>Docker Cloud Infrastructure</em> running these commands:</p>

<div class="highlight highlight-Bash"><pre>% wget --no-check-certificate --quiet <span class="se">\</span>
    -O brooklyn-clocker-examples-0.7.0-SNAPSHOT-dist.tar.gz http://git.io/0ig_ag
% tar zxf brooklyn-clocker-examples-0.7.0-SNAPSHOT-dist.tar.gz
% <span class="nb">cd </span>brooklyn-clocker-examples-0.7.0-SNAPSHOT
% ./bin/clocker.sh &lt;location&gt;
</pre></div>

<p>Where <code>&lt;location&gt;</code> can be e.g. <code>jclouds:softlayer:lon02</code> for Softlayer London,
or a named location or a fixed IP e.g. <code>byon:(hosts="1.2.3.4")</code>.
Those simple steps will give you a running docker instance on your favourite cloud.</p>

<p>For anything other than a localhost or bring-your-own-nodes location, it is vital that you 
first configure a <code>~/.brooklyn/brooklyn.properties</code> file with cloud credentials and security 
details, and create an SSH key (defaulting to <code>~/.ssh/id_rsa</code>). A simple example 
<code>brooklyn.properties</code> file would be:</p>

<pre><code># Sets up a user with credentials admin:password for accessing the Brooklyn web-console.
# To genreate the hashed password, see `brooklyn generate-password --user admin`
brooklyn.webconsole.security.users=admin
brooklyn.webconsole.security.user.admin.salt=DOp5
brooklyn.webconsole.security.user.admin.sha256=ffc241eae74cd035fdab353229d53c20943d0c1b6a0a8972a4f24769d99a6826

# Credentials to use in your favourite cloud
brooklyn.location.jclouds.softlayer.identity=SL123456
brooklyn.location.jclouds.softlayer.credential=&lt;private-key&gt;

brooklyn.location.jclouds.aws-ec2.identity=AKA_YOUR_ACCESS_KEY_ID
brooklyn.location.jclouds.aws-ec2.credential=YourSecretKeyWhichIsABase64EncodedString
</code></pre>

<p>For more information on setting up locations, including supplying cloud provider credentials, see the <a href="https://brooklyn.incubator.apache.org/quickstart/#configuring-a-location"><em>Setting up Locations</em> section of
Brooklyn Getting Started</a>, and the more detailed <a href="https://brooklyn.incubator.apache.org/v/0.7.0-M1/use/guide/locations/index.html">locations guide</a>.</p>

<p>The Brooklyn web-console, which will be deploying and managing your Docker Cloud, can be accessed at 
<a href="http://localhost:8081">http://localhost:8081</a> - this URL will have been written to standard out during startup.</p>

<p>Once the <code>DockerCloud</code>  application has started, a new location named <code>my-docker-cloud</code> will be
available in the Locations drop-down list when adding new applications. Simply start a new application in this location
and it will use Docker containers instead of virtual machines.</p>

<p>For more information on deploying applications from the Brooklyn catalog, see
<a href="https://brooklyn.incubator.apache.org/quickstart/policies-and-catalogs.html">Getting Started - Policies and Catalogs</a>.
You can also paste a YAML blueprint into the <em>YAML</em> tab of the <em>Add Application</em> dialog, as follows:</p>

<div class="highlight highlight-Yaml"><pre><span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my-docker-cloud</span>
<span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">brooklyn.entity.webapp.jboss.JBoss7Server</span>
  <span class="l-Scalar-Plain">brooklyn.config</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">wars.root</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://search.maven.org/remotecontent?filepath=io/brooklyn/example/brooklyn-example-hello-world-sql-webapp//brooklyn-example</span>
</pre></div>

<h3><a name="building-from-source" class="anchor" href="#building-from-source"><span class="octicon octicon-link"></span></a>Building from source</h3>

<p>Build and run the examples as follows:</p>

<div class="highlight highlight-Bash"><pre>    % git clone https://github.com/brooklyncentral/clocker.git
    ...
    % <span class="nb">cd </span>clocker
    % mvn clean install
    ...
    % <span class="nb">cd </span>examples
    % mvn assembly:single
    ...
    % <span class="nb">cd </span>target
    % tar zxf brooklyn-clocker-examples-0.7.0-SNAPSHOT-dist.tar.gz
    % <span class="nb">cd </span>brooklyn-clocker-examples-0.7.0-SNAPSHOT
    % ./bin/clocker.sh &lt;location&gt;
    ...
</pre></div>

<h2><a name="getting-involved" class="anchor" href="#getting-involved"><span class="octicon octicon-link"></span></a>Getting involved</h2>

<p>Clocker is Apache 2.0 licensed, and builds on Apache Brooklyn. Please get involved and join the 
discussion on <a href="http://freenode.net/">Freenode</a>, IRC <code>#brooklyncentral</code> or the Apache Brooklyn 
community <a href="https://brooklyn.incubator.apache.org/community/">mailing list</a>. We also maintain a
<a href="https://trello.com/b/lhS7ltyi/clocker">Trello</a> board with the current roadmap and active tasks.</p>

<h3><a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h3>

<p>Please visit the <a href="https://github.com/brooklyncentral/clocker/wiki">wiki</a> for more details.</p>

<hr/>

<p>Copyright 2014 by Cloudsoft Corporation Limited</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-15947686-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
