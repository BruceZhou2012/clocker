<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Clocker - The Docker Cloud Maker</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Clocker</h1>
        <p class="header">The Docker Cloud Maker</p>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/brooklyncentral/clocker/zipball/master">Source ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/brooklyncentral/clocker/tarball/master">Source TAR</a></li>
          <li class="download"><a class="buttons" href="https://github.com/brooklyncentral/clocker/releases/download/v1.1.0-PREVIEW.20150816/brooklyn-clocker-dist.tar.gz">Distribution TGZ</a></li>
          <li><a class="buttons github" href="https://github.com/brooklyncentral/clocker">View On GitHub</a></li>
        </ul>
        <p class="header">This project is maintained by <a class="header name" href="https://github.com/grkvlt">@grkvlt</a> and <a class="header name" href="https://github.com/andreaturli">@andreaturli</a></p>
      </header>
      <section>
        <h1><a name="clocker" class="anchor" href="#clocker"><span class="octicon octicon-link"></span></a>Clocker</h1>

<img width="640" src="images/clocker-io.png" />

<p>Clocker creates and manages a <b><a href="http://docker.io/">Docker</a></b> cloud infrastructure.  Clocker
supports single-click deployment and runtime management of composite applications distributed across multiple hosts.  Plugins
are included for both <b><a href="https://github.com/Metaswitch/calico-docker">Project Calico</a></b> and
<b><a href="http://github.com/weaveworks/weave/">Weave</a></b> to provide seamless Software-Defined Networking
integration.  Application blueprints written to run in virtual machines provisioned using <b><a
href="https://brooklyn.incubator.apache.org/">Apache Brooklyn</a></b> can thus be deployed to containers on your Docker
Cloud infrastructure.</p>

<p>This repository contains the required Brooklyn entities and locations, and some example application blueprints.</p>

<h2><a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h2>

<p>To get started, you just have to download the Clocker distribution archive, deploy one of the <b>Docker
Cloud</b> blueprints to the cloud or machines of your choice, and then use Clocker to deploy your applications. This
will automatically create the required Docker containers.</p>

<iframe class="youtube" width="640" height="480" src="//www.youtube.com/embed/i2Nhg2J8puM" frameborder="0" allowfullscreen></iframe>

<p>You can create a Docker Cloud on your favourite cloud provider or on a private or hybrid cloud, using any of the APIs
supported by <a href="http://jclouds.apache.org">Apache jclouds</a>. Alternatively you can target one or more existing
machines for running Docker, for example using Vagrant and VirtualBox.</p>

<p>If you are keen to peek under the covers, you will find the Docker Cloud infrastructure blueprints at either
<a href="https://raw.githubusercontent.com/brooklyncentral/clocker/master/examples/src/main/assembly/files/blueprints/docker-cloud-weave.yaml">docker-cloud-weave.yaml</a>
or <a href="https://raw.githubusercontent.com/brooklyncentral/clocker/master/examples/src/main/assembly/files/blueprints/docker-cloud-calico.yaml">docker-cloud-calico.yaml</a>
depending on your choice of SDN provider. These show the components being created, including examples of placement strategies
and container naming schemes.</p>

<h3><a name="using-the-latest-clocker-release" class="anchor" href="#using-the-latest-clocker-release"><span class="octicon octicon-link"></span></a>Using the latest Clocker release</h3>

<p>The current version of Clocker is <b><a href="https://github.com/brooklyncentral/clocker/releases/tag/v1.1.0-PREVIEW.20150816">1.1.0-PREVIEW.20150816</a></b>.
You can deploy your own <b>Docker Cloud</b> with a Weave SDN by running these commands with the
<code>&lt;network&gt;</code> argument set to <code>weave</code>, to use Project Calico as your SDN
provider, change the argument to <code>calico</code> instead:

<pre><code>% wget --no-check-certificate --quiet \
    -O brooklyn-clocker-dist.tar.gz http://git.io/v3NgU
% tar zxf brooklyn-clocker-dist.tar.gz
% cd brooklyn-clocker
% ./bin/clocker.sh &lt;location&gt; &lt;network&gt;
</code></pre>

<p>Where <code>&lt;location&gt;</code> can be a jclouds
supported provider such as <code>jclouds:softlayer:lon02</code> for SoftLayer London,
a named location or a fixed IP like <code>byon:(hosts="10.1.2.3")</code>.
Those simple steps will give you a running docker instance on your favourite cloud.</p>

<!-- TODO add Vagrantfile instructions -->

<p>For anything other than a localhost or bring-your-own-nodes location, it is vital that you 
first configure a <code>~/.brooklyn/brooklyn.properties</code> file with cloud credentials and security 
details, and create an SSH key (defaulting to <code>~/.ssh/id_rsa</code>). A simple example 
<code>brooklyn.properties</code> file would be:</p>

<pre><code># Optional user and credential setup of admin:password for accessing the Brooklyn web-console.
# To genreate the hashed password, see `brooklyn generate-password --user admin`
brooklyn.webconsole.security.provider = org.apache.brooklyn.rest.security.provider.ExplicitUsersSecurityProvider
brooklyn.webconsole.security.users = admin
brooklyn.webconsole.security.user.admin.salt = DOp5
brooklyn.webconsole.security.user.admin.sha256 = ffc241eae74cd035fdab353229d53c20943d0c1b6a0a8972a4f24769d99a6826

# Optional SSH configuration
brooklyn.ssh.config.privateKeyFile = ~/.ssh/id_rsa_clocker
brooklyn.ssh.config.publicKeyFile = ~/.ssh/id_rsa_clocker.pub

# Cloud location configurations
brooklyn.location.jclouds.softlayer.identity = user.name
brooklyn.location.jclouds.softlayer.credential = softlayersecretapikey
brooklyn.location.named.Softlayer\ California = jclouds:softlayer:sjc01

brooklyn.location.jclouds.aws-ec2.identity = ACCESS_KEY
brooklyn.location.jclouds.aws-ec2.credential = awssecretkey
brooklyn.location.named.Amazon\ Ireland = jclouds:aws-ec2:eu-west-1
</code></pre>

<p>For more information on setting up locations, including supplying cloud provider credentials, see the
<a href="https://brooklyn.incubator.apache.org/v/latest/yaml/setting-locations.html"><em>Setting Locations</em></a> section of the Brooklyn user guide.
For a more in-depth look, see <a href="https://brooklyn.incubator.apache.org/v/latest/ops/locations/index.html"><em>Locations</em></a>.</p>

<p>The Brooklyn web-console, which will be deploying and managing your Docker Cloud, can be accessed at 
<a href="http://localhost:8081">http://localhost:8081</a> - this URL will have been written to standard out during startup.
A read-only view of the running Docker Clouds is also available at <a href="http://localhost:8081/clocker/">http://localhost:8081/clocker</a></p>

<img width="310" src="images/clocker-calico.png" />
<img width="310" src="images/clocker-console.png" />

<p>Once your Docker Cloud application has started, a new location named <code>my-docker-cloud</code> will be
available in the <em>Locations</em> drop-down list when adding new applications. Simply start a new application in this location
and it will use Docker containers instead of virtual machines.</p>

<img width="310" src="images/clocker-calico-add-app.png" />

<p>For more information on deploying applications from the Brooklyn catalog, see
<a href="https://brooklyn.incubator.apache.org/v/latest/start/blueprints.html#launching-from-the-catalog"><em>Launching from the Catalog</em></a>
in the Brooklyn user guide. You can also paste a YAML blueprint into the <em>YAML</em> tab of the <em>Add Application</em> dialog, as follows:</p>

<pre><code>
location: my-docker-cloud
services:
- type: brooklyn.entity.webapp.jboss.JBoss7Server
  brooklyn.config:
    wars.root:
    - "https://s3-eu-west-1.amazonaws.com/brooklyn-clocker/hello-world.war"
</code></pre>

<p>A blueprint for an application using a Docker image would look like this:</p>

<pre><code>
location: my-docker-cloud
services:
- type: docker:redis:2.8.19
  openPorts:
  - 6379
  directPorts:
  - 6379
</code></pre>

<h3><a name="building-from-source" class="anchor" href="#building-from-source"><span class="octicon octicon-link"></span></a>Building from source</h3>

<p>Build and run the examples as follows:</p>

<pre><code>% git clone https://github.com/brooklyncentral/clocker.git
...
% cd clocker
% mvn clean install
...
% cd examples/target/brooklyn-clocker-dist/brooklyn-clocker
% ./bin/clocker.sh &lt;location&gt; &lt;network&gt;
...
</code></pre>

<p>If you just want to test the latest code, then our <a href="https://travis-ci.org/brooklyncentral/clocker">Travis CI</a>
build runs for every commit and the resulting distribution files are archived and made available for download on
<a href="http://clocker-latest.s3-website-eu-west-1.amazonaws.com/">Amazon S3</a>.</p>

<h2><a name="getting-involved" class="anchor" href="#getting-involved"><span class="octicon octicon-link"></span></a>Getting involved</h2>

<p>Clocker is Apache 2.0 licensed, and builds on Apache Brooklyn. Please get involved and join the 
discussion on <a href="http://freenode.net/">Freenode</a>, IRC <code>#brooklyncentral</code> or the Apache Brooklyn 
community <a href="https://brooklyn.incubator.apache.org/community/">mailing list</a>. We also maintain a
<a href="https://trello.com/b/lhS7ltyi/clocker">Trello</a> board with the current roadmap and active tasks.</p>

<h3><a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h3>

<p>Please visit the <a href="https://github.com/brooklyncentral/clocker/wiki">wiki</a> for more details.</p>

<hr/>

<p>Copyright 2014-2015 by Cloudsoft Corporation Limited</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
      <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script>
      <script type="text/javascript">
        try {
          var pageTracker = _gat._getTracker("UA-15947686-1");
          pageTracker._trackPageview();
        } catch(err) {}
    </script>
  </body>
</html>
